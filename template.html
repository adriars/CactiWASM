<!doctype html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>CACTI 7.0</title>
    <style>
      .spinner {
        height: 50px;
        width: 50px;
        margin: 0px auto;
        -webkit-animation: rotation .8s linear infinite;
        -moz-animation: rotation .8s linear infinite;
        -o-animation: rotation .8s linear infinite;
        animation: rotation 0.8s linear infinite;
        border-left: 10px solid rgb(0, 0, 0);
        border-right: 10px solid rgb(0, 0, 0);
        border-bottom: 10px solid rgb(0, 0, 0);
        border-top: 10px solid rgb(255, 255, 255);
        border-radius: 100%;
        background-color: rgb(255, 255, 255);
      }
      @-webkit-keyframes rotation {
        from {-webkit-transform: rotate(0deg);}
        to {-webkit-transform: rotate(360deg);}
      }
      @-moz-keyframes rotation {
        from {-moz-transform: rotate(0deg);}
        to {-moz-transform: rotate(360deg);}
      }
      @-o-keyframes rotation {
        from {-o-transform: rotate(0deg);}
        to {-o-transform: rotate(360deg);}
      }
      @keyframes rotation {
        from {transform: rotate(0deg);}
        to {transform: rotate(360deg);}
      }
    </style>
  </head>
  <body>
    <figure style="overflow:visible;" id="spinner"><div class="spinner"></div><center style="margin-top:0.5em"><h1>LOADING CACTI 7.0</h1></center></figure>
    <div id="cacti_app" hidden>
    <div style="align-items: center; justify-content: center; display: flex; height: 100vh; flex-direction: column;">
        <form>
          <h1 style="text-align: center;">Basic configuration</h1>
            <label for="cache_size">Cache size (bytes)</label>
            <input type="number" id="cache_size" value="131072" oninput="(() => {cache_cfg.cache_size.value = parseInt(this.value);})();">
            <label for="block_size">Block size (bytes)</label>
            <input type="number" id="block_size" value="64" oninput="(() => {cache_cfg.block_size.value = parseInt(this.value);})();">
            <label for="associativity">Associativity</label>
            <input type="number" id="associativity" value="2" oninput="(() => {cache_cfg.associativity.value = parseInt(this.value);})();">
            <label for="technology">Technology (u)</label>
            <input type="radio" name="technology" id="technology_0.022" value="0.022" oninput="(() => {cache_cfg.technology.value = parseFloat(this.value);})();">
            <label for="technology_0.022">0.022</label>
            <input type="radio" name="technology" id="technology_0.032" value="0.032" oninput="(() => {cache_cfg.technology.value = parseFloat(this.value);})();">
            <label for="technology_0.032">0.032</label>
            <input type="radio" name="technology" id="technology_0.045" value="0.045" oninput="(() => {cache_cfg.technology.value = parseFloat(this.value);})();">
            <label for="technology_0.045">0.045</label>
            <input type="radio" name="technology" id="technology_0.065" value="0.065" oninput="(() => {cache_cfg.technology.value = parseFloat(this.value);})();">
            <label for="technology_0.065">0.065</label>
            <input type="radio" name="technology" id="technology_0.090" value="0.090" checked oninput="(() => {cache_cfg.technology.value = parseFloat(this.value);})();">
            <label for="technology_0.090">0.090</label>
            <input type="radio" name="technology" id="technology_0.180" value="0.180" oninput="(() => {cache_cfg.technology.value = parseFloat(this.value);})();">
            <label for="technology_0.180">0.180</label>
            <label for="UCA_bank_count">UCA bank count</label>
            <input type="number" id="UCA_bank_count" value="1" oninput="(() => {cache_cfg.UCA_bank_count.value = parseInt(this.value);})();">
            <label for="read_write_port">Read-write port</label>
            <input type="number" id="read_write_port" value="1" oninput="(() => {cache_cfg.read_write_port.value = parseInt(this.value);})();">
            <h1 style="text-align: center;">Advanced configuration</h1>
        </form>
        <button onclick="parse_cacti_output()">Test html form</button>
        <textarea id="cachecfg" style="width: 90vw; height: 90vh;">
//# Cache size
//-size (bytes) 2048
//-size (bytes) 4096
//-size (bytes) 32768
-size (bytes) 131072
//-size (bytes) 262144
//-size (bytes) 1048576
//-size (bytes) 2097152
//-size (bytes) 4194304
//-size (bytes) 8388608
//-size (bytes) 16777216
//-size (bytes) 33554432
//-size (bytes) 134217728
//-size (bytes) 67108864
//-size (bytes) 1073741824

//# power gating
-Array Power Gating - "false"
-WL Power Gating - "false"
-CL Power Gating - "false"
-Bitline floating - "false"
-Interconnect Power Gating - "false"
-Power Gating Performance Loss 0.01

//# Line size
//-block size (bytes) 8
-block size (bytes) 64

//# To model Fully Associative cache, set associativity to zero
//-associativity 0
-associativity 2
//-associativity 4
//-associativity 8

-read-write port 1
-exclusive read port 0
-exclusive write port 0
-single ended read ports 0

//# Multiple banks connected using a bus
-UCA bank count 1
//-technology (u) 0.022
//-technology (u) 0.040
//-technology (u) 0.032
-technology (u) 0.090

//# following three parameters are meaningful only for main memories

-page size (bits) 8192 
-burst length 8
-internal prefetch width 8

//# following parameter can have one of five values -- (itrs-hp, itrs-lstp, itrs-lop, lp-dram, comm-dram)
-Data array cell type - "itrs-hp"
//-Data array cell type - "itrs-lstp"
//-Data array cell type - "itrs-lop"

//# following parameter can have one of three values -- (itrs-hp, itrs-lstp, itrs-lop)
-Data array peripheral type - "itrs-hp"
//-Data array peripheral type - "itrs-lstp"
//-Data array peripheral type - "itrs-lop"

//# following parameter can have one of five values -- (itrs-hp, itrs-lstp, itrs-lop, lp-dram, comm-dram)
-Tag array cell type - "itrs-hp"
//-Tag array cell type - "itrs-lstp"
//-Tag array cell type - "itrs-lop"

//# following parameter can have one of three values -- (itrs-hp, itrs-lstp, itrs-lop)
-Tag array peripheral type - "itrs-hp"
//-Tag array peripheral type - "itrs-lstp"
//-Tag array peripheral type - "itrs-lop

//# Bus width include data bits and address bits required by the decoder
//-output/input bus width 16
-output/input bus width 512

// 300-400 in steps of 10
-operating temperature (K) 360

//# Type of memory - cache (with a tag array) or ram (scratch ram similar to a register file) 
//# or main memory (no tag array and every access will happen at a page granularity Ref: CACTI 5.3 report)
-cache type "cache"
//-cache type "ram"
//-cache type "main memory"

//# to model special structure like branch target buffers, directory, etc. 
//# change the tag size parameter
//# if you want cacti to calculate the tagbits, set the tag size to "default"
-tag size (b) "default"
//-tag size (b) 22

//# fast - data and tag access happen in parallel
//# sequential - data array is accessed after accessing the tag array
//# normal - data array lookup and tag access happen in parallel
//#          final data block is broadcasted in data array h-tree 
//#          after getting the signal from the tag array
//-access mode (normal, sequential, fast) - "fast"
-access mode (normal, sequential, fast) - "normal"
//-access mode (normal, sequential, fast) - "sequential"

//# DESIGN OBJECTIVE for UCA (or banks in NUCA)
-design objective (weight delay, dynamic power, leakage power, cycle time, area) 0:0:0:100:0

//# Percentage deviation from the minimum value 
//# Ex: A deviation value of 10:1000:1000:1000:1000 will try to find an organization
//# that compromises at most 10% delay. 
//# NOTE: Try reasonable values for % deviation. Inconsistent deviation
//# percentage values will not produce any valid organizations. For example,
//# 0:0:100:100:100 will try to identify an organization that has both
//# least delay and dynamic power. Since such an organization is not possible, CACTI will
//# throw an error. Refer CACTI-6 Technical report for more details
-deviate (delay, dynamic power, leakage power, cycle time, area) 20:100000:100000:100000:100000

//# Objective for NUCA
-NUCAdesign objective (weight delay, dynamic power, leakage power, cycle time, area) 100:100:0:0:100
-NUCAdeviate (delay, dynamic power, leakage power, cycle time, area) 10:10000:10000:10000:10000

//# Set optimize tag to ED or ED^2 to obtain a cache configuration optimized for
//# energy-delay or energy-delay sq. product
//# Note: Optimize tag will disable weight or deviate values mentioned above
//# Set it to NONE to let weight and deviate values determine the 
//# appropriate cache configuration
//-Optimize ED or ED^2 (ED, ED^2, NONE): "ED"
-Optimize ED or ED^2 (ED, ED^2, NONE): "ED^2"
//-Optimize ED or ED^2 (ED, ED^2, NONE): "NONE"

-Cache model (NUCA, UCA)  - "UCA"
//-Cache model (NUCA, UCA)  - "NUCA"

//# In order for CACTI to find the optimal NUCA bank value the following
//# variable should be assigned 0.
-NUCA bank count 0

//# NOTE: for nuca network frequency is set to a default value of 
//# 5GHz in time.c. CACTI automatically
//# calculates the maximum possible frequency and downgrades this value if necessary

//# By default CACTI considers both full-swing and low-swing 
//# wires to find an optimal configuration. However, it is possible to 
//# restrict the search space by changing the signaling from "default" to 
//# "fullswing" or "lowswing" type.
-Wire signaling (fullswing, lowswing, default) - "Global_30"
//-Wire signaling (fullswing, lowswing, default) - "default"
//-Wire signaling (fullswing, lowswing, default) - "lowswing"

//-Wire inside mat - "global"
-Wire inside mat - "semi-global"
//-Wire outside mat - "global"
-Wire outside mat - "semi-global"

-Interconnect projection - "conservative"
//-Interconnect projection - "aggressive"

//# Contention in network (which is a function of core count and cache level) is one of
//# the critical factor used for deciding the optimal bank count value
//# core count can be 4, 8, or 16
//-Core count 4
-Core count 8
//-Core count 16
-Cache level (L2/L3) - "L3"

-Add ECC - "true"

//-Print level (DETAILED, CONCISE) - "CONCISE"
-Print level (DETAILED, CONCISE) - "DETAILED"

//# for debugging
-Print input parameters - "true"
//-Print input parameters - "false"
//# force CACTI to model the cache with the 
//# following Ndbl, Ndwl, Nspd, Ndsam,
//# and Ndcm values
//-Force cache config - "true"
-Force cache config - "false"
-Ndwl 1
-Ndbl 1
-Nspd 0
-Ndcm 1
-Ndsam1 0
-Ndsam2 0

//#//#//#//# Default CONFIGURATION values for baseline external IO parameters to DRAM. More details can be found in the CACTI-IO technical report (), especially Chapters 2 and 3.

//# Memory Type (D3=DDR3, D4=DDR4, L=LPDDR2, W=WideIO, S=Serial). Additional memory types can be defined by the user in extio_technology.cc, along with their technology and configuration parameters.

-dram_type "DDR3"
//-dram_type "DDR4"
//-dram_type "LPDDR2"
//-dram_type "WideIO"
//-dram_type "Serial"

//# Memory State (R=Read, W=Write, I=Idle  or S=Sleep) 

//-io state  "READ"
-io state "WRITE"
//-io state "IDLE"
//-io state "SLEEP"

//#Address bus timing. To alleviate the timing on the command and address bus due to high loading (shared across all memories on the channel), the interface allows for multi-cycle timing options. 

//-addr_timing 0.5 //DDR
-addr_timing 1.0 //SDR (half of DQ rate)
//-addr_timing 2.0 //2T timing (One fourth of DQ rate)
//-addr_timing 3.0 // 3T timing (One sixth of DQ rate)

//# Memory Density (Gbit per memory/DRAM die)

-mem_density 4 Gb //Valid values 2^n Gb

//# IO frequency (MHz) (frequency of the external memory interface).

-bus_freq 800 MHz //As of current memory standards (2013), valid range 0 to 1.5 GHz for DDR3, 0 to 533 MHz for LPDDR2, 0 - 800 MHz for WideIO and 0 - 3 GHz for Low-swing differential. However this can change, and the user is free to define valid ranges based on new memory types or extending beyond existing standards for existing dram types.

//# Duty Cycle (fraction of time in the Memory State defined above)

-duty_cycle 1.0 //Valid range 0 to 1.0

//# Activity factor for Data (0->1 transitions) per cycle (for DDR, need to account for the higher activity in this parameter. E.g. max. activity factor for DDR is 1.0, for SDR is 0.5)

-activity_dq 1.0 //Valid range 0 to 1.0 for DDR, 0 to 0.5 for SDR

//# Activity factor for Control/Address (0->1 transitions) per cycle (for DDR, need to account for the higher activity in this parameter. E.g. max. activity factor for DDR is 1.0, for SDR is 0.5)

-activity_ca 0.5 //Valid range 0 to 1.0 for DDR, 0 to 0.5 for SDR, 0 to 0.25 for 2T, and 0 to 0.17 for 3T

//# Number of DQ pins 

-num_dq 72 //Number of DQ pins. Includes ECC pins.

//# Number of DQS pins. DQS is a data strobe that is sent along with a small number of data-lanes so the source synchronous timing is local to these DQ bits. Typically, 1 DQS per byte (8 DQ bits) is used. The DQS is also typucally differential, just like the CLK pin. 

-num_dqs 18 //2 x differential pairs. Include ECC pins as well. Valid range 0 to 18. For x4 memories, could have 36 DQS pins.

//# Number of CA pins 

-num_ca 25 //Valid range 0 to 35 pins.

//# Number of CLK pins. CLK is typically a differential pair. In some cases additional CLK pairs may be used to limit the loading on the CLK pin. 

-num_clk  2 //2 x differential pair. Valid values: 0/2/4.

//# Number of Physical Ranks

-num_mem_dq 2 //Number of ranks (loads on DQ and DQS) per buffer/register. If multiple LRDIMMs or buffer chips exist, the analysis for capacity and power is reported per buffer/register. 

//# Width of the Memory Data Bus

-mem_data_width 8 //x4 or x8 or x16 or x32 memories. For WideIO upto x128.

//# RTT Termination Resistance

-rtt_value 10000

//# RON Termination Resistance

-ron_value 34

//# Time of flight for DQ

-tflight_value

//# Parameter related to MemCAD

//# Number of BoBs: 1,2,3,4,5,6,
-num_bobs 1
    
//# Memory System Capacity in GB
-capacity 80	
    
//# Number of Channel per BoB: 1,2. 
-num_channels_per_bob 1	

//# First Metric for ordering different design points	
-first metric "Cost"
//#-first metric "Bandwidth"
//#-first metric "Energy"
    
//# Second Metric for ordering different design points	
//#-second metric "Cost"
-second metric "Bandwidth"
//#-second metric "Energy"

//# Third Metric for ordering different design points	
//#-third metric "Cost"
//#-third metric "Bandwidth"
-third metric "Energy"	
    
    
//# Possible DIMM option to consider
//#-DIMM model "JUST_UDIMM"
//#-DIMM model "JUST_RDIMM"
//#-DIMM model "JUST_LRDIMM"
-DIMM model "ALL"

//#if channels of each bob have the same configurations
//#-mirror_in_bob "T"
-mirror_in_bob "F"

//#if we want to see all channels/bobs/memory configurations explored	
//#-verbose "T"
//#-verbose "F"
        </textarea>
        <button onclick="(run_cacti())">run cacti</button>
        <textarea id="output" style="width: 90vw; height: 90vh;"></textarea>
    </div>
    <div>
      <canvas id="acces_time_cache_size_chart"></canvas>
      <canvas id="acces_time_block_size_chart"></canvas>
      <canvas id="acces_time_associativity_chart"></canvas>
      <canvas id="acces_time_technology_chart"></canvas>
    </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
 
    <script type='text/javascript'>
      var spinnerElement = document.getElementById('spinner');
      var outputElement = document.getElementById('output');

      // Default values of the cache configuration
      var cache_cfg = {
        cache_size: {parameter: '-size (bytes)', value: 131072},
        block_size: {parameter: '-block size (bytes)', value: 64},
        associativity: {parameter: '-associativity', value: 2},
        technology: {parameter: '-technology (u)', value: 0.090},
        read_write_port: {parameter: '-read-write port', value: 1},
        uca_bank_count: {parameter: '-UCA bank count', value: 1},

        array_power_gating: {parameter: '-Array Power Gating', value: "false"},
        wl_power_gating: {parameter: '-WL Power Gating', value: "false"},
        cl_power_gating: {parameter: '-CL Power Gating', value: "false"},
        bitline_floating: {parameter: '-Bitline floating', value: "false"},
        interconnect_power_gating: {parameter: '-Interconnect Power Gating', value: "false"},
        power_gating_performance_los: {parameter: '-Power Gating Performance Loss', value: 0.01},
        exclusive_read_port: {parameter: '-exclusive read port', value: 0},
        exclusive_write_port: {parameter: '-exclusive write port', value: 0},
        single_ended_read_ports: {parameter: '-single ended read ports', value: 0},
        page_size: {parameter: '-page size (bits)', value: 8192},
        burst_length: {parameter: '-burst length', value: 8},
        internal_prefetch_width: {parameter: '-internal prefetch width', value: 8},
        data_array_cell_type: {parameter: '-Data array cell type', value: "itrs-hp"},
        data_array_peripheral_type: {parameter: 'Data array peripheral type', value: "itrs-hp"},
        tag_array_cell_type: {parameter: '-Tag aray cell type', value: "itrs-hp"},
        tag_array_peripheral_type: {parameter: '-Tag array peripheral type', value: "itrs-hp"},

        

        aaa: {parameter: 'bbb', value: ccc},
      };

      var parsed_cacti_output = {
        acces_time: 0,
        cycle_time: 0,
        total_dynamic_read_energy_per_access: 0,
        total_dynamic_write_energy_per_access: 0,
        total_leakage_power_of_a_bank: 0,
        total_gate_leakage_power_of_a_bank: 0,
        cache_area: 0,
        data_side_htree_input_delay: 0,
        data_side_decoder_wordline_delay: 0,
        data_side_bitline_delay: 0,
        data_side_sense_amplifier_delay: 0,
        data_side_htree_output_delay: 0,
        tag_side_htree_input_delay: 0,
        tag_side_decoder_wordline_delay: 0,
        tag_side_bitline_delay: 0,
        tag_side_sense_amplifier_delay: 0,
        tag_side_comparator_delay: 0,
        tag_side_htree_output_delay: 0
      };

      var acces_time_cache_size_chart = new Chart(document.getElementById('acces_time_cache_size_chart'), {
            type: 'line',
            data: {
            labels: [],
            datasets: [{
                label: 'Acces time by cache size',
                data: [],
                borderWidth: 1
            }]
            },
        });


      var acces_time_block_size_chart = new Chart(document.getElementById('acces_time_block_size_chart'), {
            type: 'line',
            data: {
            labels: [],
            datasets: [{
                label: 'Acces time by block size',
                data: [],
                borderWidth: 1
            }]
            },
        });


      var acces_time_associativity_chart = new Chart(document.getElementById('acces_time_associativity_chart'), {
            type: 'line',
            data: {
            labels: [],
            datasets: [{
                label: 'Acces time by associativity',
                data: [],
                borderWidth: 1
            }]
            },
        });

        var acces_time_technology_chart = new Chart(document.getElementById('acces_time_technology_chart'), {
            type: 'line',
            options: {
    plugins: {
      title: {
        display: true,
        text: 'Technology node'
      },
    },
    scales: {
      x: {
        display: true,
        title: {
          display: true,
          text: 'Technology node'
        }
      },
      y: {
        display: true,
        title: {
          display: true,
          text: 'Technology node'
        }
      }
    }
    },
            data: {
            labels: [1,2,3,4,5],
            datasets: [{
                label: 'Acces time by technology node',
                data: [1,2,3,4,5],
                borderWidth: 1,
                borderColor: "red",
                backgroundColor: "red"
            },
            {
                label: 'Acces time by technology node 2',
                data: [10,20,30,40],
                borderWidth: 1,
                borderColor: "green",
                backgroundColor: "green"
            }]
            },
        });

      function create_config_file_from_form() {

        console.log(
`${cache_cfg.cache_size.parameter} ${cache_cfg.cache_size.value}
${cache_cfg.block_size.parameter} ${cache_cfg.block_size.value}
${cache_cfg.associativity.parameter} ${cache_cfg.associativity.value}
${cache_cfg.technology.parameter} ${cache_cfg.technology.value}`
        );
        
      }

      function parse_cacti_output() {

        const cacti_output = document.getElementById('output');

        const basic_output = cacti_output.value.match(/Access time.+\n.+\n.+\n.+\n.+\n.+\n.+/)[0];
        const basic_output_numbers = basic_output.match(/(\d+\.\d+)|(\d+)/g);
        const data_side_output = cacti_output.value.match(/Data side .+\n.+\n.+\n.+\n.+\n.+/)[0];
        const data_side_output_numbers = data_side_output.match(/(\d+\.\d+)|(\d+)/g);
        const tag_side_output = cacti_output.value.match(/Tag side .+\n.+\n.+\n.+\n.+\n.+\n.+/)[0];
        const tag_side_output_numbers = tag_side_output.match(/(\d+\.\d+)|(\d+)/g);

        parsed_cacti_output.acces_time = parseFloat(basic_output_numbers[0]);
        parsed_cacti_output.cycle_time = parseFloat(basic_output_numbers[1]);
        parsed_cacti_output.total_dynamic_read_energy_per_access = parseFloat(basic_output_numbers[2]);
        parsed_cacti_output.total_dynamic_write_energy_per_access = parseFloat(basic_output_numbers[3]);
        parsed_cacti_output.total_leakage_power_of_a_bank = parseFloat(basic_output_numbers[4]);
        parsed_cacti_output.total_gate_leakage_power_of_a_bank = parseFloat(basic_output_numbers[5]);
        parsed_cacti_output.cache_area = parseFloat(basic_output_numbers[6]) * parseFloat(basic_output_numbers[7]);

        parsed_cacti_output.data_side_htree_input_delay = parseFloat(data_side_output_numbers[1]);
        parsed_cacti_output.data_side_decoder_wordline_delay = parseFloat(data_side_output_numbers[2]);
        parsed_cacti_output.data_side_bitline_delay = parseFloat(data_side_output_numbers[3]);
        parsed_cacti_output.data_side_sense_amplifier_delay = parseFloat(data_side_output_numbers[4]);
        parsed_cacti_output.data_side_htree_output_delay = parseFloat(data_side_output_numbers[5]);

        parsed_cacti_output.tag_side_htree_input_delay = parseFloat(tag_side_output_numbers[1]);
        parsed_cacti_output.tag_side_decoder_wordline_delay = parseFloat(tag_side_output_numbers[2]);
        parsed_cacti_output.tag_side_bitline_delay = parseFloat(tag_side_output_numbers[3]);
        parsed_cacti_output.tag_side_sense_amplifier_delay = parseFloat(tag_side_output_numbers[4]);
        parsed_cacti_output.tag_side_comparator_delay = parseFloat(tag_side_output_numbers[5]);
        parsed_cacti_output.tag_side_htree_output_delay = parseFloat(tag_side_output_numbers[6]);

      }

      function update_acces_time_cache_size_chart() {
        var element = document.getElementById('output');

        var acces_time = element.value.substring(element.value.indexOf('Access time (ns):') + 18, element.value.indexOf('Access time (ns):') + 24)

        acces_time_cache_size_chart.data.labels.push(cache_cfg.cache_size.value);
        acces_time_cache_size_chart.data.datasets[0].data.push(acces_time);

        acces_time_cache_size_chart.update();
      }

      function update_acces_time_block_size_chart() {
        var element = document.getElementById('output');
        
        var acces_time = element.value.substring(element.value.indexOf('Access time (ns):') + 18, element.value.indexOf('Access time (ns):') + 24)

        acces_time_block_size_chart.data.labels.push(cache_cfg.block_size.value);
        acces_time_block_size_chart.data.datasets[0].data.push(acces_time);

        acces_time_block_size_chart.update();
      }

      function update_acces_time_associativity_chart() {
        var element = document.getElementById('output');
        
        var acces_time = element.value.substring(element.value.indexOf('Access time (ns):') + 18, element.value.indexOf('Access time (ns):') + 24)

        acces_time_associativity_chart.data.labels.push(cache_cfg.associativity.value);
        acces_time_associativity_chart.data.datasets[0].data.push(acces_time);

        acces_time_associativity_chart.update();
      }

      function update_acces_time_technology_chart() {
        var element = document.getElementById('output');
        
        var acces_time = element.value.substring(element.value.indexOf('Access time (ns):') + 18, element.value.indexOf('Access time (ns):') + 24)

        acces_time_technology_chart.data.labels.push(cache_cfg.technology.value);
        acces_time_technology_chart.data.datasets[0].data.push(acces_time);

        acces_time_technology_chart.update();
      }

    function run_cacti() {
      var element = document.getElementById('output');
      element.value = "";

        FS.writeFile('cache.cfg', document.getElementById('cachecfg').value, {flags: 'w+'});

        callMain(arguments_);

        parse_cacti_output();

        update_acces_time_cache_size_chart();
        update_acces_time_block_size_chart();
        update_acces_time_associativity_chart();
        update_acces_time_technology_chart();
    }

      var Module = {
        preRun: [],
        postRun: [],
        print: (function() {
          var element = document.getElementById('output');
          if (element) element.value = ''; // clear browser cache
          return function(text) {
            if (arguments.length > 1) text = Array.prototype.slice.call(arguments).join(' ');
            // These replacements are necessary if you render to raw HTML
            //text = text.replace(/&/g, "&amp;");
            //text = text.replace(/</g, "&lt;");
            //text = text.replace(/>/g, "&gt;");
            //text = text.replace('\n', '<br>', 'g');
            //console.log(text);
            if (element) {
              element.value += text + "\n";
              //element.scrollTop = element.scrollHeight; // focus on bottom
            }
          };
        })(),
        setStatus: function(text) {
          if (!Module.setStatus.last) Module.setStatus.last = { time: Date.now(), text: '' };
          if (text === Module.setStatus.last.text) return;
          var m = text.match(/([^(]+)\((\d+(\.\d+)?)\/(\d+)\)/);
          var now = Date.now();
          if (m && now - Module.setStatus.last.time < 30) return; // if this is a progress update, skip it if too soon
          Module.setStatus.last.time = now;
          Module.setStatus.last.text = text;
          if (m) {
            text = m[1];
            spinnerElement.hidden = false;
          } else {
            if (!text) spinnerElement.hidden = true;
          }
        },
        totalDependencies: 0,
        monitorRunDependencies: function(left) {
          this.totalDependencies = Math.max(this.totalDependencies, left);
          Module.setStatus(left ? 'Preparing... (' + (this.totalDependencies-left) + '/' + this.totalDependencies + ')' : 'All downloads complete.');
        },
        onRuntimeInitialized: function () {
          document.getElementById("cacti_app").removeAttribute("hidden");
        }
      };
      Module.setStatus('Downloading...');
      window.onerror = function() {
        Module.setStatus('Exception thrown, see JavaScript console');
        spinnerElement.style.display = 'none';
        Module.setStatus = function(text) {
          if (text) console.error('[post-exception status] ' + text);
        };
      };
    </script>
    {{{ SCRIPT }}}
  </body>
</html>